# π IRC Chat Server

<div align="center">

**κ³ μ„±λ¥ λ©€ν‹°ν΄λΌμ΄μ–ΈνΈ IRC μ±„ν… μ„λ²„ κµ¬ν„ ν”„λ΅μ νΈ**

[![π“ κΈ°μ  λ¬Έμ„](https://img.shields.io/badge/%F0%9F%93%9A-%EA%B8%B0%EC%88%A0%20%EB%AC%B8%EC%84%9C-blue?style=for-the-badge)](https://github.com/irssiServer/irc_server/wiki)

</div>

---

## π“– ν”„λ΅μ νΈ κ°μ”

μ΄ ν”„λ΅μ νΈλ” **RFC 2812 IRC ν”„λ΅ν† μ½ ν‘μ¤€**μ„ μ¤€μν•μ—¬ κµ¬ν„λ μ‹¤μ‹κ°„ μ±„ν… μ„λ²„μ…λ‹λ‹¤. **kqueue κΈ°λ° μ΄λ²¤νΈ λ“λ¦¬λΈ μ•„ν‚¤ν…μ²**λ¥Ό μ‚¬μ©ν•μ—¬ λ†’μ€ λ™μ‹μ„±κ³Ό μ„±λ¥μ„ μ κ³µν•λ©°, μ‹¤μ  IRC ν΄λΌμ΄μ–ΈνΈ(irssi, HexChat λ“±)μ™€ μ™„λ²½ν• νΈν™μ„±μ„ μ§€μ›ν•©λ‹λ‹¤.

## β¨ μ£Όμ” κΈ°λ¥

### π” μ‚¬μ©μ μΈμ¦ μ‹μ¤ν…

- **3λ‹¨κ³„ μΈμ¦ ν”„λ΅μ„Έμ¤**: NICK, USER, PASS μμ„ λ¬΄κ΄€ μ²λ¦¬
- **μ¤‘λ³µ λ‹‰λ„¤μ„ κ²€μ¦** λ° μ‹¤μ‹κ°„ μ¶©λ λ°©μ§€
- **ν¨μ¤μ›λ“ κΈ°λ° μ„λ²„ μ ‘κ·Ό μ μ–΄**

### π’¬ μ±„λ„ κ΄€λ¦¬ μ‹μ¤ν…

- **μ±„λ„ μƒμ„±/μ‚­μ ** λ° μ‹¤μ‹κ°„ μ°Έμ—¬μ κ΄€λ¦¬
- **μ΄μμ κ¶ν• μ‹μ¤ν…** (op/deop λ…λ Ήμ–΄)
- **μ±„λ„ λ¨λ“ μ μ–΄**: invite-only, key, limit λ“±
- **κ°μΈ λ©”μ‹μ§€(DM)** λ° κ·Έλ£Ή μ±„ν… μ§€μ›

### π€ κ³ μ„±λ¥ λ„¤νΈμ›ν¬ μ²λ¦¬

- **kqueue κΈ°λ° I/O λ©€ν‹°ν”λ ‰μ‹±**μΌλ΅ μλ°± λ… λ™μ‹ μ ‘μ† μ§€μ›
- **Non-blocking μ†μΌ“** ν†µμ‹ μΌλ΅ μ‘λ‹µμ„± κ·Ήλ€ν™”
- **μ΄λ²¤νΈ λ“λ¦¬λΈ μ•„ν‚¤ν…μ²**λ΅ CPU ν¨μ¨μ„± ν–¥μƒ

### π›΅οΈ μ•μ •μ„± λ° λ³΄μ•

- **λ©”λ¨λ¦¬ λ„μ λ°©μ§€** λ° μλ™ λ¦¬μ†μ¤ κ΄€λ¦¬
- **νμΌ λ””μ¤ν¬λ¦½ν„° κ΄€λ¦¬** μ‹μ¤ν…
- **μμ™Έ μ•μ „μ„±** λ³΄μ¥ λ° μ—λ¬ λ³µκµ¬ λ©”μ»¤λ‹μ¦

## π—οΈ μ‹μ¤ν… μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   IRC Client    β”‚β—„β”€β”€β–Ίβ”‚   IRC Server     β”‚β—„β”€β”€β–Ίβ”‚   IRC Client    β”‚
β”‚   (irssi)       β”‚    β”‚                  β”‚    β”‚   (HexChat)     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                       β”‚  β”‚   kqueue    β”‚ β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”‚  β”‚ Event Loop  β”‚ β”‚    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   IRC Client    β”‚β—„β”€β”€β–Ίβ”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚β—„β”€β”€β–Ίβ”‚   IRC Client    β”‚
β”‚   (Terminal)    β”‚    β”‚                  β”‚    β”‚   (Custom)      β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                       β”‚  β”‚User/Channel β”‚ β”‚
                       β”‚  β”‚ Controller  β”‚ β”‚
                       β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
                       β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## π› οΈ κΈ°μ  μ¤νƒ

- **μ–Έμ–΄**: C++98
- **λ„¤νΈμ›ν¬**: BSD Socket, kqueue (macOS/FreeBSD)
- **ν”„λ΅ν† μ½**: IRC (RFC 2812)
- **λΉλ“ μ‹μ¤ν…**: Makefile
- **ν…μ¤νΈ ν™κ²½**: Docker (InspIRCd + irssi)

## π“¦ μ„¤μΉ λ° μ‹¤ν–‰

### μ”κµ¬μ‚¬ν•­

- macOS λλ” FreeBSD (kqueue μ§€μ›)
- C++ μ»΄νμΌλ¬ (C++98 ν‘μ¤€)
- Make

### μ»΄νμΌ

```bash
git clone https://github.com/your-username/irc_server.git
cd irc_server
make
```

### μ‹¤ν–‰

```bash
./ircserv <port> <password>
```

**μμ‹:**

```bash
./ircserv 6667 mypassword
```

### ν΄λΌμ΄μ–ΈνΈ μ—°κ²°

```bash
# irssi μ‚¬μ©
irssi -c localhost -p 6667 -w mypassword

# nc μ‚¬μ© (ν…μ¤νΈμ©)
nc localhost 6667
```

## π® μ‚¬μ©λ²•

### κΈ°λ³Έ IRC λ…λ Ήμ–΄

#### μ„λ²„ μ—°κ²°

```
PASS mypassword
NICK mynickname
USER myuser 0 * :My Real Name
```

#### μ±„λ„ κ΄€λ¦¬

```
JOIN #general          # μ±„λ„ μ…μ¥
PART #general          # μ±„λ„ ν‡΄μ¥
LIST                   # μ±„λ„ λ©λ΅ λ³΄κΈ°
NAMES #general         # μ±„λ„ μ‚¬μ©μ λ©λ΅
```

#### λ©”μ‹μ§€

```
PRIVMSG #general :Hello everyone!    # μ±„λ„ λ©”μ‹μ§€
PRIVMSG user123 :Hi there!           # κ°μΈ λ©”μ‹μ§€
```

#### μ΄μμ λ…λ Ήμ–΄

```
MODE #general +o user123    # μ‚¬μ©μμ—κ² op κ¶ν• λ¶€μ—¬
MODE #general +i            # invite-only λ¨λ“ μ„¤μ •
MODE #general +k secret     # μ±„λ„ ν‚¤ μ„¤μ •
KICK #general user123       # μ‚¬μ©μ κ°•ν‡΄
```

### μ—°κ²° μ¤νΈλ μ¤ ν…μ¤νΈ

```
for i in {1..100}
do
      nc localhost 6667 &
done
```


## π”§ κ°λ° λ° ν…μ¤νΈ

### Docker ν…μ¤νΈ ν™κ²½

ν”„λ΅μ νΈμ—λ” μ‹¤μ  IRC μ„λ²„μ™€μ νΈν™μ„± ν…μ¤νΈλ¥Ό μ„ν• Docker ν™κ²½μ΄ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤.

```bash
cd irssi_docker
docker build -t irc-test .
docker run -it --name irc-container irc-test

# μ»¨ν…μ΄λ„ λ‚΄λ¶€μ—μ„
inspircd --config /etc/inspircd/inspircd.conf &
tcpflow -i lo port 6667 -c &
irssi -c 127.0.0.1
```

### ν¨ν‚· λ¶„μ„

```bash
# TCP ν†µμ‹  ν¨ν‚· μΊ΅μ²
tcpflow -i lo port 6667 -c

# λ‹¤λ¥Έ ν„°λ―Έλ„μ—μ„ ν΄λΌμ΄μ–ΈνΈ μ ‘μ†
irssi -c 127.0.0.1
```

## π“ μ„±λ¥ νΉμ§•

- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: ν΄λΌμ΄μ–ΈνΈλ‹Ή ~2KB
- **μ‘λ‹µ μ‹κ°„**: ν‰κ·  1ms μ΄ν•
- **CPU μ‚¬μ©λ¥ **: μ ν΄ μ‹ 0.1% λ―Έλ§

## π† μ£Όμ” μ„±κ³Ό

### κΈ°μ μ  ν•΄κ²° κ³Όμ 

1. **io μ΄λ²¤νΈ κ΄€λ¦¬ μµμ ν™”**: io λ©€ν‹°ν”λ ‰μ‹± κΈ°λ²•μ kqueueλ¥Ό μ΄μ©ν• μ΄λ²¤νΈ κΈ°λ° λΉ„λ™κΈ° I/O μ²λ¦¬
2. **IRC ν”„λ΅ν† μ½ νΈν™μ„±**: μ‹¤μ  ν΄λΌμ΄μ–ΈνΈμ™€ μ£Όμ”κΈ°λ¥μ— λ€ν• νΈν™
3. **λ™μ‹μ„± μ²λ¦¬**: μ΄λ²¤νΈ λ“λ¦¬λΈ μ•„ν‚¤ν…μ²λ΅ κ³ μ„±λ¥ κµ¬ν„

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
irc_server/
β”β”€β”€ srcs/
β”‚   β”β”€β”€ main.cpp                    # λ©”μΈ μ„λ²„ λ£¨ν”„
β”‚   β”β”€β”€ KqueueEventManager.cpp      # kqueue μ΄λ²¤νΈ μ²λ¦¬
β”‚   β”β”€β”€ CommandHandler.cpp          # IRC λ…λ Ήμ–΄ μ²λ¦¬
β”‚   β”β”€β”€ UserChannelController.cpp   # μ‚¬μ©μ/μ±„λ„ κ΄€λ¦¬
β”‚   β”β”€β”€ SendMessage.cpp             # IRC λ©”μ‹μ§€ μ „μ†΅
β”‚   β”β”€β”€ User.cpp                    # μ‚¬μ©μ ν΄λμ¤
β”‚   β””β”€β”€ Channel.cpp                 # μ±„λ„ ν΄λμ¤
β”β”€β”€ includes/                       # ν—¤λ” νμΌλ“¤
β”β”€β”€ irssi_docker/                   # Docker ν…μ¤νΈ ν™κ²½
β””β”€β”€ Makefile
```
